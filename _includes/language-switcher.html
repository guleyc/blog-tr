<a href="#" id="language-switcher-link" class="language-switcher" aria-label="Switch to other version"></a>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const switchLink = document.getElementById('language-switcher-link');
    if (!switchLink) {
        return;
    }
    const currentHost = window.location.hostname;

    let targetHost;
    let flagImageSrc;
    let altText;
    let ariaLabel;

    if (currentHost.includes('guley.com.tr')) {
        targetHost = 'https://guley.com.au';
        flagImageSrc = '/assets/images/au.svg'; // Sadece relative path
        altText = 'Australian Flag';
        ariaLabel = 'Switch to English version';
    } else {
        targetHost = 'https://guley.com.tr';
        flagImageSrc = '/assets/images/tr.svg'; // Sadece relative path
        altText = 'Turkish Flag';
        ariaLabel = 'Türkçe versiyona geç';
    }

    const currentPath = window.location.pathname;
    const currentSearch = window.location.search;
    const currentHash = window.location.hash;

    const newUrl = targetHost + currentPath + currentSearch + currentHash + '?lang_switch=true';

    switchLink.href = newUrl;
    switchLink.innerHTML = `<img src="${flagImageSrc}" alt="${altText}">`;
    switchLink.setAttribute('aria-label', ariaLabel);

    // Debug için console'a yazdıralım
    console.log('Current Host:', currentHost);
    console.log('Target URL:', newUrl);

    switchLink.addEventListener('click', function(e) {
        console.log('Language switcher clicked, redirecting to:', newUrl);
        // Cross-domain cookie yerine localStorage kullan
        localStorage.setItem('manual_lang_switch', Date.now().toString());
        // URL'e parametre ekleyerek yönlendir
        window.location.href = newUrl;
    });
});
</script>