<!DOCTYPE html>
<html lang="{{site.lang}}">
    <head>
        <!-- Basic Meta Tags -->
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
        
        <!-- Core Web Vitals & Performance -->
        <meta name="format-detection" content="telephone=no">
        <link rel="dns-prefetch" href="//fonts.googleapis.com">
        <link rel="dns-prefetch" href="//www.googletagmanager.com">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        
        <!-- Theme Script - Load early to prevent flash -->
        <script data-cfasync="false">
            const theme = localStorage.getItem("theme") || "light";
            document.documentElement.setAttribute("data-theme", theme);
        </script>

        {%- assign page_title = page.title | default: site.title -%}
        {%- assign page_description = page.description | default: page.excerpt | default: site.description | strip_html | normalize_whitespace | truncate: 160 | escape -%}
        {%- assign page_url = page.url | absolute_url -%}
        {%- assign page_image = page.image | default: site.logo | absolute_url -%}

        <!-- Page Title -->
        <title>{% if page.title %}{{page.title}} - {{site.title}}{% else %}{{site.title}}{% endif %}</title>
        
        <!-- SEO Meta Tags -->
        <meta name="description" content="{{ page_description }}">
        {% assign all_keywords = '' %}
        {% if page.tags %}
        {% assign all_keywords = page.tags | join: ', ' %}
        {% elsif page.keywords %}
        {% assign all_keywords = page.keywords | join: ', ' %}
        {% else %}
        {% assign all_keywords = site.keywords | join: ', ' %}
        {% endif %}
        <meta name="keywords" content="{{ all_keywords }}">
        <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
        <meta name="referrer" content="no-referrer-when-downgrade">
        
        <!-- Base URL and Author -->
        <base href="{{ site.url }}{{ site.baseurl }}" />
        <meta name="author" content="{{ site.author.name }}">
        
        <!-- Security Headers -->
        <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
        
        <!-- Mobile Optimization -->
        <meta name="theme-color" content="#ffffff">
        <meta name="msapplication-TileColor" content="#ffffff">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

        <!-- Google Fonts with Performance Optimization -->
        <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;500;600;700&family=Source+Sans+Pro:wght@400;500;600;700&display=swap" rel="stylesheet">
        
        <!-- Preload Critical Resources -->
        <link rel="preload" href="/assets/css/style.css" as="style">
        <link rel="preload" href="/assets/images/favicon.png" as="image">
        
        <!-- Article Meta (for blog posts) -->
        {% if page.date %}
        <meta content="{{ page.date | date_to_xmlschema }}" property="article:published_time">
        <meta content="{{ site.url }}/about/" property="article:author">
        {% if page.category %}
        <meta content="{{ page.category }}" property="article:section">
        {% endif %}
        {% if page.tags %}
        <meta content="{{ page.tags | join: ', ' }}" property="article:tag">
        {% endif %}
        {% endif %}

        <!-- Open Graph Meta Tags -->
        <meta property="og:site_name" content="{{site.title}}">
        <meta property="og:type" content="{% if page.title %}article{% else %}website{% endif %}" />
        <meta property="og:url" content="{{ site.url }}{{ site.baseurl }}{{page.url}}"/>
        <meta property="og:title" content="{% if page.title %}{{page.title}} - {{site.title}}{% else %}{{site.title}}{% endif %}" />
        <meta property="og:description" content="{{ page_description }}" />
        <meta property="og:image" content="{{ site.url }}{{ site.baseurl }}/{% if page.image %}{{page.image}}{% else %}assets/images/favicon.png{% endif %}"/>
        <meta property="og:image:width" content="1200">
        <meta property="og:image:height" content="630">
        <meta property="og:image:alt" content="{% if page.image_alt %}{{page.image_alt}}{% else %}{{site.title}}{% endif %}">
        <meta property="og:locale" content="{{site.lang | default: 'en_US'}}">
        
        <!-- Twitter Card Meta Tags -->
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:title" content="{% if page.title %}{{page.title}} - {{site.title}}{% else %}{{site.title}}{% endif %}" />
        <meta name="twitter:description" content="{{ page_description }}" />
        <meta name="twitter:image" content="{{ site.url }}{{ site.baseurl }}/{% if page.image %}{{page.image}}{% else %}assets/images/favicon.png{% endif %}" />
        <meta name="twitter:image:alt" content="{% if page.image_alt %}{{page.image_alt}}{% else %}{{site.title}}{% endif %}">

        <!-- Stylesheets -->
        <link rel="stylesheet" href="/assets/css/normalize.css?v={{ site.github.build_revision }}">
        <link rel="stylesheet" href="/assets/css/highlight.css?v={{ site.github.build_revision }}">
        <link rel="stylesheet" href="/assets/css/style.css?v={{ site.github.build_revision }}">
		<link rel="stylesheet" href="/assets/css/print.css?v={{ site.github.build_revision }}">
        
        <!-- Favicons -->
        <link rel="shortcut icon" href="/assets/images/favicon.png" />
        <link rel="shortcut icon" type="image/png" href="/assets/images/favicon.png">
        <link rel="shortcut icon" sizes="192x192" href="/assets/images/favicon.png">
        <link rel="apple-touch-icon" href="/assets/images/favicon.png">

        <!-- Canonical URLs and Language Alternatives -->
        <link rel="canonical" href="https://guley.com.tr{{ page.url }}" />
        
        <!-- Language Alternatives -->
        <link rel="alternate" hreflang="tr-TR" href="https://guley.com.tr{{ page.url }}" />
        {% if page.en_url %}
        <link rel="alternate" hreflang="en-AU" href="https://guley.com.au{{ page.en_url }}" />
        {% endif %}
        <link rel="alternate" hreflang="x-default" href="https://guley.com.tr{{ page.url }}" />

        <!-- RSS and Feed Links -->
        <link rel="alternate" type="application/atom+xml" title="{{ site.title }}" href="{{ site.url }}{{ site.baseurl }}/atom.xml">
        <link rel="alternate" type="application/json" title="{{ site.title }}" href="{{ site.url }}{{ site.baseurl }}/feed.json" />
        <link rel="alternate" type="application/rss+xml" title="{{ site.title }}" href="{{ '/feed.xml' | prepend: site.baseurl | prepend: site.url }}">
        
        <!-- Search Engine and Sitemap -->
        <script src="https://unpkg.com/lunr/lunr.min.js"></script>
        <link rel="sitemap" type="application/xml" title="sitemap" href="{{ site.url }}{{ site.baseurl }}/sitemap.xml" />

        <!-- Structured Data (JSON-LD) -->
        {% if page.layout == 'post' %}
        <!-- Blog Post Schema -->
        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "BlogPosting",
            "mainEntityOfPage": { "@type": "WebPage", "@id": "{{ page_url }}" },
            "headline": {{ page.title | jsonify }},
            "description": {{ page_description | jsonify }},
            "image": { 
                "@type": "ImageObject", 
                "url": "{{ page_image }}",
                "width": 1200,
                "height": 630
            },
            "datePublished": "{{ page.date | date_to_xmlschema }}",
            "dateModified": "{{ page.last_modified_at | default: page.date | date_to_xmlschema }}",
            "author": { 
                "@type": "Person", 
                "name": {{ site.author.name | jsonify }},
                "url": "{{ site.url }}/about/"
            },
            "publisher": { 
                "@type": "Organization", 
                "name": {{ site.title | jsonify }}, 
                "logo": { 
                    "@type": "ImageObject", 
                    "url": "{{ site.logo | absolute_url }}" 
                }
            },
            "keywords": "{{ all_keywords }}",
            {% if page.category %}
            "articleSection": "{{ page.category }}",
            {% endif %}
            "wordCount": "{{ page.content | number_of_words }}"
        }
        </script>
        {% elsif page.url == '/' %}
        <!-- Website Schema -->
        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "name": {{ site.title | jsonify }},
            "url": "{{ site.url | absolute_url }}",
            "potentialAction": { "@type": "SearchAction", "target": "{{ site.url | absolute_url }}/search/?q={search_term_string}", "query-input": "required name=search_term_string" }
        }
        </script>
        {% endif %}
    <script defer src="https://analytics.webc.com.tr/script.js" data-website-id="af68d336-0988-4b06-bfbe-c2e2e1f21851"></script>
    </head>

    <body>
